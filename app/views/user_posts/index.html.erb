<!-- マイページは青基調の色に設定 -->
<div class="mypage-thema">
	<div class="container">
		<div class="row">
			<div class="col-lg-3">
				<div class="menu-bar">
					<ul>
						<li><%= link_to "マイページ", user_path(current_user.id) %></li>
						<li><%= link_to "新規投稿", new_post_path %></li>
						<li><%= link_to "グループ一覧", user_posts_path %></li>
					</ul>
				</div>
			</div>
			<div class="col-lg-9">
				<% @user.each do |post| %>
					<div class="post">
						<%= post.group_name %>
						<button class="btn bg-info fr">チャットページ</button>
						<button class="btn bg-success fr join-member">メンバー一覧</button>

						<section class="dn">
							<h4>メンバー一覧</h4>
							<table class="table-space">
								<% post.user_posts.each do |join| %>
									<tr>
										<td>
											<%= attachment_image_tag(join.user, :image, :fill, 20, 20, format: "jpeg", fallback: "no_image.jpg") %>
										</td>
										<td>
											<%= link_to user_path(join.user.id) do %>
											<%= join.user.user_name %>
											<% end %>
										</td>
									</tr>
								<% end %>
							</table>
						</section>
					</div>
				<% end %>
				<% @user_posts.each do |user_post| %>
					<div class="post">
						<%= user_post.post.group_name %>
						<button class="btn bg-info fr">チャットページ</button>
						<button class="btn bg-success fr join-member">メンバー一覧</button>
						<section class="dn">
							<h4>メンバー一覧</h4>
							<table class="table-space">
								<% user_post.post.user_posts.each do |join| %>
									<tr>
										<td>
											<%= attachment_image_tag(join.user, :image, :fill, 20, 20, format: "jpeg", fallback: "no_image.jpg") %>
										</td>
										<td>
											<%= link_to user_path(join.user.id) do %>
											<%= join.user.user_name %>
											<% end %>
										</td>
									</tr>
								<% end %>
							</table>
						</section>
					</div>
				<% end %>
			</div>
		</div>
	</div>
</div>

<script>
	$(function(){
		$('.join-member').on('click', (function(){
			if ($(this).next('section').hasClass('dn')) {
				$(this).next('section').removeClass('dn').addClass('db');
			} else {
				$(this).next('section').removeClass('db').addClass('dn');
			}
		}));
	});
</script>