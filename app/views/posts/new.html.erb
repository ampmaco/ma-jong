<!-- マイページは青基調の色に設定 -->
<div class="mypage-thema">
	<div class="container">
		<div class="row">
			<div class="col-md-10 col-md-offset-1">
				<div class="post">
					<h2>マイページ（投稿・一覧）</h2>

					<!-- 新規募集投稿フォーム -->
					<%= form_for(@post) do |f| %>

					<!-- エラー発生時にエラー件数と文表示 -->
					<% if @post.errors.any? %>
						<%= @post.errors.count %>件のエラーが発生しました
						<% @post.errors.full_messages.each do |message| %>
							<%= message %>
						<% end %>
					<% end %>

						<div class="">
							<%= f.label :group_name, "グループ名" %><br>
							<%= f.text_field :group_name, autofocus: true %>
						</div>

						<!-- post.rbでprefectureカラムをenumで定義したものをセレクトボックスで引用する -->
						<div class="">
							<%= f.label :prefecture, "都道府県選択" %><br>
							<%= f.select :prefecture, [["北海道", "北海道"],["青森県","青森県"],["岩手県","岩手県"],["宮城県","宮城県"],["秋田県","秋田県"],["山形県","山形県"],["福島県","福島県"],["茨城県", "茨城県"],["栃木県","栃木県"],["群馬県","群馬県"],["埼玉県","埼玉県"],["千葉県","千葉県"],["東京都","東京都"],["神奈川","神奈川"],["新潟県", "新潟県"],["富山県","富山県"],["石川県","石川県"],["福井県","福井県"],["山梨県","山梨県"],["長野県","長野県"],["岐阜県","岐阜県"],["静岡県", "静岡県"],["愛知県","愛知県"],["三重県","三重県"],["滋賀県","滋賀県"],["京都府","京都府"],["大阪府","大阪府"],["兵庫県","兵庫県"],["奈良県", "奈良県"],["和歌山県","和歌山県"],["鳥取県","鳥取県"],["島根県","島根県"],["岡山県","岡山県"],["広島県","広島県"],["山口県","山口県"],["徳島県", "徳島県"],["香川県","香川県"],["愛媛県","愛媛県"],["高知県","高知県"],["福岡県","福岡県"],["佐賀県","佐賀県"],["長崎県","長崎県"],["熊本県", "熊本県"],["大分県","大分県"],["宮崎県","宮崎県"],["鹿児島県","鹿児島県"],["沖縄県","沖縄県"]], prompt: "選択して下さい" %>
						</div>

						<div class="">
							<%= f.label :region, "地域・最寄駅等" %><br>
							<%= f.text_field :region %>
						</div>

						<div class="">
							<%= f.label :desctiption, "募集内容" %><br>
							<%= f.text_area :description %>
						</div>

						<%= f.submit "投稿する" %>

					<% end %>
				</div>

				<!-- 一覧表示のeach文 -->
				<% @posts.each do |post| %>
				<!-- 自分の投稿物のみ表示させる条件文 -->
				<% if post.user_id == current_user.id %>
					<!-- 一覧表示の１つを区切るための箱 -->
					<div class="post">
						<!-- セル間の余白調整のセレクトタグ -->
						<table class="table-space">
							<tr>
								<td>グループ管理者：</td>
								<td><%= post.user.user_name %></td>
							</tr>
							<tr>
								<td>グループ名：</td>
								<td><%= post.group_name %></td>
							</tr>
							<tr>
								<td>地域(都道府県)：</td>
								<td><%= post.prefecture %></td>
							</tr>
							<tr>
								<td>地域(市・最寄駅)：</td>
								<td><%= post.region %></td>
							</tr>
							<tr>
								<td>募集内容：</td>
								<td><%= simple_format(post.description) %></td>
							</tr>
							<tr>
								<td>最終更新日：</td>
								<td>
									<!-- アップデートカラムで最終更新日を表示
									そのまま表示させると時間など無駄な情報が出るため.strftimeで情報を制御 -->
									<%= post.updated_at.strftime("%Y/%m/%d") %>
								</td>
							</tr>
							<tr>
								<td>メンバー数：</td>
								<td></td>
							</tr>
							<tr>
								<td>メンバー平均年齢：</td>
								<td></td>
							</tr>
							<tr>
								<td></td>
								<td>
									<%= link_to post_path(post.id), method: :delete, "data-confirm" => "投稿内容を本当に削除しますか？" do %>
										<button class="btn bg-danger fr">削除</button>
									<% end %>
									<%= link_to edit_post_path(post.id) do %>
										<button class="btn bg-info fr">編集</button>
									<% end %>

								</td>
							</tr>
						</table>
					</div>
				<% end %>
				<% end %>

			</div>
		</div>
	</div>
</div>